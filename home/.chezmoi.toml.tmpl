{{- /* ============================================================================ */ -}}
{{- /*                     CHEZMOI CONFIGURATION TEMPLATE                          */ -}}
{{- /*                         Yuzu's Dotfiles - 2025                               */ -}}
{{- /* ============================================================================ */ -}}

{{- /* Prompt for user info on first init */ -}}
{{- $email := promptStringOnce . "email" "Email address" -}}
{{- $name := promptStringOnce . "name" "Full name" -}}
{{- $github_user := promptStringOnce . "github_user" "GitHub username" -}}

{{- /* Detect environment */ -}}
{{- $is_wsl := false -}}
{{- $is_codespaces := false -}}
{{- $is_devcontainer := false -}}
{{- $hostname := .chezmoi.hostname -}}

{{- /* WSL Detection */ -}}
{{- if eq .chezmoi.os "linux" -}}
{{-   if (.chezmoi.kernel.osrelease | lower | contains "microsoft") -}}
{{-     $is_wsl = true -}}
{{-   end -}}
{{- end -}}

{{- /* Codespaces/DevContainer Detection */ -}}
{{- if env "CODESPACES" -}}
{{-   $is_codespaces = true -}}
{{- end -}}
{{- if env "REMOTE_CONTAINERS" -}}
{{-   $is_devcontainer = true -}}
{{- end -}}

# ============================================================================
# CHEZMOI CONFIGURATION
# Generated by chezmoi init - Do not edit manually
# ============================================================================

sourceDir = {{ .chezmoi.sourceDir | quote }}

[data]
    email = {{ $email | quote }}
    name = {{ $name | quote }}
    github_user = {{ $github_user | quote }}
    
    # Environment Detection
    is_wsl = {{ $is_wsl }}
    is_codespaces = {{ $is_codespaces }}
    is_devcontainer = {{ $is_devcontainer }}
    
    # System Info
    hostname = {{ $hostname | quote }}
    os = {{ .chezmoi.os | quote }}
    arch = {{ .chezmoi.arch | quote }}

[git]
    autoCommit = false
    autoPush = false

[diff]
    command = "delta"
    args = ["--side-by-side"]
    pager = "delta"

[merge]
    command = "nvim"
    args = ["-d", "{{ "{{" }} .Destination {{ "}}" }}", "{{ "{{" }} .Source {{ "}}" }}", "{{ "{{" }} .Target {{ "}}" }}"]

[edit]
    command = "nvim"
